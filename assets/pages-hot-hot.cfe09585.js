import{r as a,s as e,a as s,b as t,c as o,o as l,d as i,w as u,e as r,f as n,g as c,h as p,F as m,i as d,j as v,k as g}from"./index.f9866fe9.js";import{_ as f}from"./uni-icons.2435415a.js";import{o as h,a as _,b as y,c as b,r as j}from"./uni-app.es.7d0fb22d.js";import{_ as k}from"./list-content-item.9d332fbd.js";import{_ as F}from"./uni-load-more.9b2cd20d.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";var w=q({__name:"hot",setup(q){const w=s({items:[]}),H=t(1),Q=t("ios"),x=t("loading"),A=t(!1);h((async()=>{A.value=!1,E(Q.value,H.value)}));const C=()=>{x.value="loading",E(Q.value,H.value)},E=async(s,t)=>{try{const{items:l}=await(({category:s,page:t,pageSize:o=20})=>new Promise(((l,i)=>{a({url:`https://api.github.com/search/repositories?q=${s}&page=${t}&per_page=${o}`,data:{auth:"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"},success(a){l(a.data)},fail(a){console.log(a),i(a),e({title:"服务器开小差了~",icon:"error"})}})})))({category:s,page:t});1===t&&(w.items=[]),A.value=!1,x.value="loading",l.length<20&&(x.value="no-more"),w.items=[...w.items,...l],o()}catch(l){o(),0===w.items.length?A.value=!0:x.value="no-more"}};return _((()=>({title:"热门",path:"/pages/hot/hot",complete(a){console.log(a)}}))),y((()=>{x.value="loading",H.value=1,E(Q.value,H.value)})),b((()=>{H.value++,E(Q.value,H.value)})),(a,e)=>{const s=j(d("uni-icons"),f),t=v,o=g,h=j(d("list-content-item"),k),_=j(d("uni-load-more"),F);return A.value?(l(),i(o,{key:0,class:"error",onClick:C},{default:u((()=>[r(s,{type:"refreshempty",size:"32"}),r(t,null,{default:u((()=>[n("点击重新加载")])),_:1})])),_:1})):(l(),i(o,{key:1,class:"hot-content-wrapper"},{default:u((()=>[(l(!0),c(m,null,p(w.items,(a=>(l(),i(h,{key:a.id,item:a},null,8,["item"])))),128)),r(_,{iconType:"auto",status:x.value},null,8,["status"])])),_:1}))}}},[["__scopeId","data-v-2ff36def"]]);export{w as default};
